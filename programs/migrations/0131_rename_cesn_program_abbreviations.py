# Generated by Django 4.2.22 on 2026-01-28 03:53

from django.db import migrations


def rename_program_abbreviations(apps, schema_editor):
    Program = apps.get_model("programs", "Program")
    # Update all programs with co_energy_calculator_ prefix to cesn_
    for program in Program.objects.filter(name_abbreviated__startswith="co_energy_calculator_"):
        program.name_abbreviated = program.name_abbreviated.replace(
            "co_energy_calculator_", "cesn_"
        )
        program.save()


def reverse_rename_program_abbreviations(apps, schema_editor):
    Program = apps.get_model("programs", "Program")
    # Reverse: update all programs with cesn_ prefix back to co_energy_calculator_
    for program in Program.objects.filter(name_abbreviated__startswith="cesn_"):
        program.name_abbreviated = program.name_abbreviated.replace(
            "cesn_", "co_energy_calculator_"
        )
        program.save()


class Migration(migrations.Migration):

    dependencies = [
        ("programs", "0130_alter_program_legal_status_required"),
    ]

    operations = [
        migrations.RunPython(rename_program_abbreviations, reverse_rename_program_abbreviations),
    ]
